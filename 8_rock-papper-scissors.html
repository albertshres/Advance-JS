<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rock paper Scissors Game</title>
</head>

<body>
  <h3>Rock paper and scissors Game</h3>

  <button onclick="
    playGame('rock');  
  "> Rock</button>

  <button onclick="
    playGame('paper');
  ">Paper</button>

  <button onclick="
    playGame('scissors');
  ">Scissors</button>

  <button onclick="
  score.Win=0;
  score.Loose=0;
  score.Tie=0;
  localStorage.removeItem('score');
  
  ">Reset Score</button>

  <script>

   /* const score = {
      Win: 0,
      Loose: 0,
      Tie: 0
    };
    */
   let score = JSON.parse( localStorage.getItem('score')) || {
      Win: 0,
      Loose: 0,
      Tie: 0
    };
    // Get data form local storage
    // Get data form local storage
    // console.log(JSON.parse( localStorage.getItem('score')));
  
   if(score===null){
     score = {
      Win: 0,
      Loose: 0,
      Tie: 0
    };
   } 
     
    function playGame(playerMove) {
      let computerMove = pickComputerMove();
      let result = '';

      if (playerMove === 'scissors') {
        if (computerMove === 'rock') {
          result = 'Loose';
        }

        else if (computerMove === 'paper') {
          result = 'Win';
        }

        else if (computerMove === 'scissors') {
          result = 'Tie';
        }
      }

      else if (playerMove === 'paper') {
        if (computerMove === 'rock') {
          result = 'Win';
        }

        else if (computerMove === 'paper') {
          result = 'Tie';
        }

        else if (computerMove === 'scissors') {
          result = 'Loose';
        }

      }

      else if (playerMove === 'rock') {
        if (computerMove === 'rock') {
          result = 'Tie';
        }

        else if (computerMove === 'paper') {
          result = 'Loose';
        }

        else if (computerMove === 'scissors') {
          result = 'Win';
        }
      }
      //  <__________For updating Score___________>
      if (result === 'Win') {
        score.Win += 1;
      }
      else if (result === 'Loose') {
        score.Loose += 1;
      }
      else if (result === 'Tie') {
        score.Tie += 1;
      } 

      //<------------For storing in local storage-------- JSON.stringify convest js obj into string>

      localStorage.setItem('score', JSON.stringify(score)); 

      alert(`Your choice is ${playerMove}. Computer choice is ${computerMove}. ${result}.
      Wins:${score.Win},Looses:${score.Loose},Ties:${score.Tie}`);

    }

    function pickComputerMove() {
      let computerMove = '';
      const rand_value = Math.random();
      if (rand_value >= 0 && rand_value < 1 / 3) {
        computerMove = 'rock';
      }

      else if (rand_value >= 1 / 3 && rand_value < 2 / 3) {
        computerMove = 'paper'
      }

      else if (rand_value >= 2 / 3 && rand_value <= 1) {
        computerMove = 'scissors'
      }

      return computerMove;

    }

  </script>

</body>

</html>